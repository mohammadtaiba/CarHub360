<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="de"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>CustomerHistoryManager.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">mmra</a> &gt; <a href="index.source.html" class="el_package">de.fherfurt.logic.customerHistory</a> &gt; <span class="el_source">CustomerHistoryManager.java</span></div><h1>CustomerHistoryManager.java</h1><pre class="source lang-java linenums">package de.fherfurt.logic.customerHistory;

import de.fherfurt.core.customer.Customer;
import de.fherfurt.model.vehicle.Vehicle;

import java.util.ArrayList;
import java.util.Date;
import java.util.List;

/**
 * Provides business logic for managing a collection of customer history records.
 */
<span class="nc" id="L13">public class CustomerHistoryManager {</span>

<span class="nc" id="L15">    private List&lt;CustomerHistory&gt; customerHistoryList = new ArrayList&lt;&gt;();</span>

    /**
     * Creates or updates a customer history record with the provided information.
     * If a record with the given ID exists, it will be updated. Otherwise, a new record is created.
     *
     * @param customerHistoryId      Unique identifier for this history record
     * @param customer               Associated customer
     * @param customerHistoryVehicle Vehicle involved in the action
     * @param customerHistoryReview  Customer's review
     * @param description            Description of the action
     * @param actionDate             Date when action occurred
     * @param isForRentalCar         Whether this involves a rental vehicle
     * @return true if creation/update successful, false if parameters are invalid
     */
    public boolean createOrUpdateCustomerHistory(int customerHistoryId, Customer customer,
                                                 Vehicle customerHistoryVehicle, CustomerHistoryReview customerHistoryReview,
                                                 String description, Date actionDate, boolean isForRentalCar) {
<span class="nc bnc" id="L33" title="All 12 branches missed.">        if (customerHistoryId &lt; 0 || customer == null || customerHistoryVehicle == null</span>
                || customerHistoryReview == null || description == null || actionDate == null) {
<span class="nc" id="L35">            return false;</span>
        }

<span class="nc bnc" id="L38" title="All 2 branches missed.">        for (CustomerHistory history : customerHistoryList) {</span>
<span class="nc bnc" id="L39" title="All 2 branches missed.">            if (history.getCustomerHistoryId() == customerHistoryId) {</span>
<span class="nc" id="L40">                history.setCustomer(customer);</span>
<span class="nc" id="L41">                history.setCustomerHistoryVehicle(customerHistoryVehicle);</span>
<span class="nc" id="L42">                history.setCustomerHistoryReview(customerHistoryReview);</span>
<span class="nc" id="L43">                history.setDescription(description);</span>
<span class="nc" id="L44">                history.setActionDate(actionDate);</span>
<span class="nc" id="L45">                history.setForRentalCar(isForRentalCar);</span>
<span class="nc" id="L46">                return true;</span>
            }
<span class="nc" id="L48">        }</span>

<span class="nc" id="L50">        CustomerHistory newHistory = new CustomerHistory(customerHistoryId, customer,</span>
                customerHistoryVehicle, customerHistoryReview, description, actionDate, isForRentalCar);
<span class="nc" id="L52">        customerHistoryList.add(newHistory);</span>
<span class="nc" id="L53">        return true;</span>
    }

    /**
     * Retrieves a customer history record by its ID.
     *
     * @param customerHistoryId ID of the history record to retrieve
     * @return CustomerHistory object if found, null otherwise
     */
    public CustomerHistory getCustomerHistory(int customerHistoryId) {
<span class="nc bnc" id="L63" title="All 2 branches missed.">        for (CustomerHistory history : customerHistoryList) {</span>
<span class="nc bnc" id="L64" title="All 2 branches missed.">            if (history.getCustomerHistoryId() == customerHistoryId) {</span>
<span class="nc" id="L65">                return history;</span>
            }
<span class="nc" id="L67">        }</span>
<span class="nc" id="L68">        return null;</span>
    }

    /**
     * Retrieves the review associated with a specific customer history record.
     *
     * @param customerHistoryId ID of the history record
     * @return CustomerHistoryReview if history exists, null otherwise
     */
    public CustomerHistoryReview getCustomerFinalReview(int customerHistoryId) {
<span class="nc" id="L78">        CustomerHistory history = getCustomerHistory(customerHistoryId);</span>
<span class="nc bnc" id="L79" title="All 2 branches missed.">        return (history != null) ? history.getCustomerHistoryReview() : null;</span>
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.9.202303310957</span></div></body></html>